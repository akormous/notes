"use strict";(self.webpackChunkmy_notes=self.webpackChunkmy_notes||[]).push([[5050],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(n),h=r,m=p["".concat(s,".").concat(h)]||p[h]||d[h]||i;return n?a.createElement(m,o(o({ref:t},c),{},{components:n})):a.createElement(m,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,o[1]=l;for(var u=2;u<i;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},4153:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var a=n(7462),r=(n(7294),n(3905));const i={},o="JSON Web Token",l={unversionedId:"miscellaneous/JWT",id:"miscellaneous/JWT",title:"JSON Web Token",description:"- JWT is an open standard that defines a compact and self-contained way for securely transmitting information between parties as a JSON object.",source:"@site/docs/5-miscellaneous/JWT.md",sourceDirName:"5-miscellaneous",slug:"/miscellaneous/JWT",permalink:"/notes/docs/miscellaneous/JWT",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/5-miscellaneous/JWT.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Miscellaneous",permalink:"/notes/docs/miscellaneous/"},next:{title:"Condensed Books",permalink:"/notes/docs/condensed-books/"}},s={},u=[{value:"When to use JWT?",id:"when-to-use-jwt",level:2},{value:"Authorization",id:"authorization",level:3},{value:"Information Exchange",id:"information-exchange",level:3},{value:"JWT Structure",id:"jwt-structure",level:2},{value:"Header",id:"header",level:2},{value:"Payload",id:"payload",level:2},{value:"Signature",id:"signature",level:2},{value:"Putting all together",id:"putting-all-together",level:2}],c={toc:u};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"json-web-token"},"JSON Web Token"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"JWT is an open standard that defines a compact and self-contained way for securely transmitting information between parties as a JSON object."),(0,r.kt)("li",{parentName:"ul"},"This information can be verified and trusted because it is digitally signed."),(0,r.kt)("li",{parentName:"ul"},"JWTs can be signed using a secret (HMAC algorithm) or a public/private key pair using RSA or ECDSA."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Signed")," tokens can verify the integrity of the claims contained within it."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Encrypted")," tokens hide those claims from other parties."),(0,r.kt)("li",{parentName:"ul"},"When tokens are signed using public/private key pairs, the signature also certifies that only the part holding the private key is the one that signed it.")),(0,r.kt)("h2",{id:"when-to-use-jwt"},"When to use JWT?"),(0,r.kt)("h3",{id:"authorization"},"Authorization"),(0,r.kt)("p",null,"This is the most common scenario, once the user is logged in, each subsequent request will include the JWT, allowing the user to access routes, services, and resources that are permitted with that token.\nEx. Single-sign on"),(0,r.kt)("h3",{id:"information-exchange"},"Information Exchange"),(0,r.kt)("p",null,"Securely transmitting information between parties, because JWTs can be signed using public/private key pairs - you can be sure the senders are who they say they are. Additionally, as the signature is calculated using the header and the payload, you can also verify that the content hasn't been tampered with."),(0,r.kt)("h2",{id:"jwt-structure"},"JWT Structure"),(0,r.kt)("p",null,"It consists of 3 parts separated by dots (",(0,r.kt)("inlineCode",{parentName:"p"},"."),"):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Header"),(0,r.kt)("li",{parentName:"ul"},"Payload"),(0,r.kt)("li",{parentName:"ul"},"Signature")),(0,r.kt)("p",null,"Therefore, a JWT typically looks like the following."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"xxxxx.yyyyy.zzzzz")),(0,r.kt)("h2",{id:"header"},"Header"),(0,r.kt)("p",null,"It consists of 2 parts - "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"type of the token, which is JWT"),(0,r.kt)("li",{parentName:"ul"},"signing algorithm being used (HMAC SHA256 or RSA)")),(0,r.kt)("p",null,"For example,"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "alg": "HS256",\n    "typ": "JWT"\n}\n')),(0,r.kt)("p",null,"Then, this JSON is Base64Url encoded to form the first part of the JWT"),(0,r.kt)("h2",{id:"payload"},"Payload"),(0,r.kt)("p",null,"It contains the claims. Claims are statements about an entity (typically, the user) and additional data. There are 3 types of claims: ",(0,r.kt)("em",{parentName:"p"},"registered, public,")," and ",(0,r.kt)("em",{parentName:"p"},"private")," claims. For more details, read ",(0,r.kt)("a",{parentName:"p",href:"https://jwt.io/introduction"},"here"),"."),(0,r.kt)("p",null,"For example,"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "sub": "1234567890",\n    "name": "Ben Dover",\n    "admin": true,\n}\n')),(0,r.kt)("p",null,"Then, this JSON is Base64Url encoded to form the second part of the JWT"),(0,r.kt)("h2",{id:"signature"},"Signature"),(0,r.kt)("p",null,"To create the signature part you have to take the encoded header, the encoded payload, a secret, the algorithm specified in the header, and sign that.\nFor example, if you use HMAC SHA256 algorithm:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-py"},'HMACSHA256(\n    base64UrlEncode(header) + "." +\n    base64UrlEncode(payload),\n    secret\n)\n')),(0,r.kt)("h2",{id:"putting-all-together"},"Putting all together"),(0,r.kt)("p",null,"The output is 3 Base64-URL strings separated by dots that can be easily passed in HTML and HTTP environments, while being more compact when compare to XML-based standards such as SAML."),(0,r.kt)("p",null,"For example,"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkJlbiBEb3ZlciIsImFkbWluIjp0cnVlfQ.nNM50laahYfPPnkvvWwM_9lGFaFS9il0qaiX6WLQyOM\n")),(0,r.kt)("h1",{id:"how-jwts-are-propagated"},"How JWTs are propagated?"),(0,r.kt)("mermaid",{value:"\nflowchart LR\n    id1[Application Client]\n    id2[Authorization Server AuthO]\n    id3[Your API Resource Server]\n\n    id1 --\x3e|1| id2\n    id2 --\x3e|2| id1\n    id1 --\x3e|3| id3\n"}),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The client request authorization to the authorization server."),(0,r.kt)("li",{parentName:"ol"},"The authorization server returns an access token to the application."),(0,r.kt)("li",{parentName:"ol"},"The application uses the access token to access a protected resource (like an API)")))}p.isMDXComponent=!0}}]);